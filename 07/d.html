<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>Required Parameters · Unfiltered</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content='website'/>
<link href="https://fonts.googleapis.com/css?family=Roboto:100normal,100italic,300normal,300italic,400normal,400italic,500normal,500italic,700normal,700italic,900normal,900italicc" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../js/page.js"></script>
<script type="text/javascript" src="../js/groups.js"></script>
<link rel="stylesheet" type="text/css" href="../lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="../lib/foundation/dist/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="../css/page.css"/>

<!--
<link rel="shortcut icon" href="../images/favicon.ico" />
-->
</head>

<body>
<div class="off-canvas-wrapper">
<div class="off-canvas-wrapper-inner" data-off-canvas-wrapper>

<div class="off-canvas position-left" id="off-canvas-menu" data-off-canvas>
<nav class="off-canvas-nav">
<div class="nav-home">
<a href="../index.html" >
<span class="home-icon">⌂</span>Unfiltered
</a>
<div class="version-number">
0.9.1
</div>
</div>
<div class="nav-toc">
<ul>
  <li><a href="../01.html" class="page">Try Unfiltered</a></li>
  <li><a href="../02.html" class="page">Plans and Intents</a></li>
  <li><a href="../03.html" class="page">Bindings and Servers</a></li>
  <li><a href="../04.html" class="page">Project Setup</a></li>
  <li><a href="../05.html" class="page">Community</a></li>
  <li><a href="../06/00.html" class="page">Matching and Responding</a>
  <ul>
    <li><a href="../06/a.html" class="page">Request Matchers</a></li>
    <li><a href="../06/b.html" class="page">Within the Parameters</a></li>
    <li><a href="../06/c.html" class="page">Response Functions</a></li>
    <li><a href="../06/d.html" class="page">Silly Store</a></li>
  </ul></li>
  <li><a href="../07/00.html" class="page">Directives and Validation</a>
  <ul>
    <li><a href="../07/a.html" class="page">Directive Intent</a></li>
    <li><a href="../07/b.html" class="page">Parameters as Directives</a></li>
    <li><a href="../07/c.html" class="page">Interpreter Reuse and Implicits</a></li>
    <li><a href="../07/d.html" class="active page">Required Parameters</a></li>
    <li><a href="../07/e.html" class="page">Independent Failure</a></li>
    <li><a href="../07/f.html" class="page">Interpreters of Your Own Design</a></li>
    <li><a href="../07/g.html" class="page">Let&rsquo;s wrap this up, Ada</a></li>
  </ul></li>
  <li><a href="../08/00.html" class="page">Application Structure</a>
  <ul>
    <li><a href="../08/a.html" class="page">Planning for Any-thing</a></li>
    <li><a href="../08/b.html" class="page">Just Kitting</a></li>
  </ul></li>
  <li><a href="../09/00.html" class="page">Identification and Cookies</a>
  <ul>
    <li><a href="../09/a.html" class="page">Who&rsquo;s Who</a></li>
    <li><a href="../09/b.html" class="page">Remembrance of Things Past</a></li>
  </ul></li>
  <li><a href="../10/00.html" class="page">Netty Plans</a>
  <ul>
    <li><a href="../10/a.html" class="page">Trying Netty</a></li>
    <li><a href="../10/b.html" class="page">Execution and Exceptions</a></li>
    <li><a href="../10/c.html" class="page">Chunked Requests</a></li>
    <li><a href="../10/d.html" class="page">Going Asynchronous</a></li>
    <li><a href="../10/e.html" class="page">Asyncrazy Temperature Server</a></li>
  </ul></li>
  <li><a href="../11.html" class="page">Jetty Extras</a></li>
  <li><a href="../12.html" class="page">ScalaTest</a></li>
  <li><a href="../99.html" class="page">Who&rsquo;s Using Unfiltered?</a></li>
</ul>
</div>

</nav>
</div>

<div class="off-canvas-content" data-off-canvas-content>

<header class="site-header expanded row">
<div class="small-12 column">
<a href="#" class="off-canvas-toggle hide-for-medium" data-toggle="off-canvas-menu"><svg class="svg-icon svg-icon-menu" version="1.1" id="Menu" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"> <path class="svg-icon-menu-path" fill="#53CDEC" d="M16.4,9H3.6C3.048,9,3,9.447,3,10c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,9.447,16.952,9,16.4,9z M16.4,13
H3.6C3.048,13,3,13.447,3,14c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,13.447,16.952,13,16.4,13z M3.6,7H16.4
C16.952,7,17,6.553,17,6c0-0.553-0.048-1-0.6-1H3.6C3.048,5,3,5.447,3,6C3,6.553,3.048,7,3.6,7z"/></svg>
</a>
<div class="title"><a href="../index.html">Unfiltered</a></div>

<!--
<a href="https://www.example.com" class="logo show-for-medium">logo</a>
-->
</div>
</header>

<div class="expanded row">

<div class="medium-3 large-2 show-for-medium column">
<nav class="site-nav">
<div class="nav-home">
<a href="../index.html" >
<span class="home-icon">⌂</span>Unfiltered
</a>
<div class="version-number">
0.9.1
</div>
</div>
<div class="nav-toc">
<ul>
  <li><a href="../01.html" class="page">Try Unfiltered</a></li>
  <li><a href="../02.html" class="page">Plans and Intents</a></li>
  <li><a href="../03.html" class="page">Bindings and Servers</a></li>
  <li><a href="../04.html" class="page">Project Setup</a></li>
  <li><a href="../05.html" class="page">Community</a></li>
  <li><a href="../06/00.html" class="page">Matching and Responding</a>
  <ul>
    <li><a href="../06/a.html" class="page">Request Matchers</a></li>
    <li><a href="../06/b.html" class="page">Within the Parameters</a></li>
    <li><a href="../06/c.html" class="page">Response Functions</a></li>
    <li><a href="../06/d.html" class="page">Silly Store</a></li>
  </ul></li>
  <li><a href="../07/00.html" class="page">Directives and Validation</a>
  <ul>
    <li><a href="../07/a.html" class="page">Directive Intent</a></li>
    <li><a href="../07/b.html" class="page">Parameters as Directives</a></li>
    <li><a href="../07/c.html" class="page">Interpreter Reuse and Implicits</a></li>
    <li><a href="../07/d.html" class="active page">Required Parameters</a></li>
    <li><a href="../07/e.html" class="page">Independent Failure</a></li>
    <li><a href="../07/f.html" class="page">Interpreters of Your Own Design</a></li>
    <li><a href="../07/g.html" class="page">Let&rsquo;s wrap this up, Ada</a></li>
  </ul></li>
  <li><a href="../08/00.html" class="page">Application Structure</a>
  <ul>
    <li><a href="../08/a.html" class="page">Planning for Any-thing</a></li>
    <li><a href="../08/b.html" class="page">Just Kitting</a></li>
  </ul></li>
  <li><a href="../09/00.html" class="page">Identification and Cookies</a>
  <ul>
    <li><a href="../09/a.html" class="page">Who&rsquo;s Who</a></li>
    <li><a href="../09/b.html" class="page">Remembrance of Things Past</a></li>
  </ul></li>
  <li><a href="../10/00.html" class="page">Netty Plans</a>
  <ul>
    <li><a href="../10/a.html" class="page">Trying Netty</a></li>
    <li><a href="../10/b.html" class="page">Execution and Exceptions</a></li>
    <li><a href="../10/c.html" class="page">Chunked Requests</a></li>
    <li><a href="../10/d.html" class="page">Going Asynchronous</a></li>
    <li><a href="../10/e.html" class="page">Asyncrazy Temperature Server</a></li>
  </ul></li>
  <li><a href="../11.html" class="page">Jetty Extras</a></li>
  <li><a href="../12.html" class="page">ScalaTest</a></li>
  <li><a href="../99.html" class="page">Who&rsquo;s Using Unfiltered?</a></li>
</ul>
</div>

</nav>
</div>

<div class="small-12 medium-9 large-10 column">
<section class="site-content">

<div class="page-header row">
<div class="medium-12 show-for-medium column">
<div class="nav-breadcrumbs">
<ul>
  <li><a href="../index.html">Unfiltered</a></li>
  <li><a href="../07/00.html">Directives and Validation</a></li>
  <li>Required Parameters</li>
</ul>
</div>
</div>
</div>

<div class="page-content row">
<div class="small-12 large-9 column" id="docs">
<h2><a href="#required-parameters" name="required-parameters" class="anchor"><span class="anchor-link"></span></a>Required Parameters</h2>
<p>So far we&rsquo;ve learned know how to define implicit interpreters from a sequence of string to any type T and use them with <code>data.as.Option[T]</code>. Now we&rsquo;ll see how to use the same interpreters for required parameters.</p>
<h3><a href="#your-function" name="your-function" class="anchor"><span class="anchor-link"></span></a>Your &ldquo;required&rdquo; Function</h3>
<p>The failure to supply a required parameter must produce an application defined error response. We&rsquo;ll define a very simple one.</p>
<pre class="prettyprint"><code class="language-scala">import unfiltered.request._
import unfiltered.response._
import unfiltered.directives._, Directives._

implicit def required[T] = data.Requiring[T].fail(name =&gt;
  BadRequest ~&gt; ResponseString(name + &quot; is missing\n&quot;)
)</code></pre>
<p>The name of the function is not important when used implicitly, but call it <code>required</code> is a good convention since you may also want to use it explicitly when defining interpreters inline.</p>
<h3><a href="#using-implicitly" name="using-implicitly" class="anchor"><span class="anchor-link"></span></a>Using &ldquo;required&rdquo; Implicitly</h3>
<p>With a required function in scope we can use it with any implicit interpreters also in scope. The <code>data.as.String</code> interpreter is imported from the <code>Directives</code> object, so we can use it immediately.</p>
<pre class="prettyprint"><code class="language-scala">unfiltered.jetty.Server.portBinding(binding).plan(
  unfiltered.filter.Planify { Directive.Intent {
    case Path(&quot;/&quot;) =&gt;
      for {
        opt &lt;- data.as.Option[String] named &quot;opt&quot;
        req &lt;- data.as.Required[String] named &quot;req&quot;
      } yield ResponseString(
        s&quot;opt: $opt req: $req&quot;
      )
  } }
).run()</code></pre>
<p>Let&rsquo;s examine the output from this one with curl:</p>
<pre class="prettyprint"><code class="language-sh">$ curl -v http://127.0.0.1:8080/ -d opt=hello -d req=world
opt: Some(hello) req: world
</code></pre>
<p>Since <code>req</code> is required to produce a success response, it&rsquo;s not wrapped in <code>Option</code> or anything else; the type of the bound value is whatever its interpreter produces.</p>
<h3><a href="#using-explicitly" name="using-explicitly" class="anchor"><span class="anchor-link"></span></a>Using &ldquo;required&rdquo; Explicitly</h3>
<p>Most interpreters work with an option of the data so that they can be chained together in support of both optional and required parameters. Required is itself an interpreter which unboxes from the <code>Option</code>, so it generally must be the last interpreter in a chain.</p>
<pre class="prettyprint"><code class="language-scala">unfiltered.jetty.Server.portBinding(binding).plan(
  unfiltered.filter.Planify { Directive.Intent {
    case Path(&quot;/&quot;) =&gt;
      for {
        in &lt;- data.as.BigInt ~&gt; required named &quot;in&quot;
      } yield ResponseString(
        in % 10 + &quot;\n&quot;
      )
  } }
).run()</code></pre>
<p>This service returns the last digit of the required provided integer. Since we didn&rsquo;t provide a <code>fail</code> handler for <code>data.as.BigInt</code>, it falls to <code>required</code> to produce a failure response.</p>
<pre class="prettyprint"><code class="language-sh">$ curl http://127.0.0.1:8080/ -d in=1334534
4
$ curl http://127.0.0.1:8080/ -d in=1334534a
in is missing
</code></pre>
<p>To be more specific, we can supply a failure to the integer interpreter.</p>
<pre class="prettyprint"><code class="language-scala">unfiltered.jetty.Server.portBinding(binding).plan(
  unfiltered.filter.Planify { Directive.Intent {
    case Path(&quot;/&quot;) =&gt;
      for {
        in &lt;- data.as.BigInt.fail((k,v) =&gt;
          BadRequest ~&gt; ResponseString(s&quot;&#39;$v&#39; is not a valid int for $k\n&quot;)
        ) ~&gt; required named &quot;in&quot;
      } yield ResponseString(
        in % 10 + &quot;\n&quot;
      )
  } }
).run()</code></pre>
<p>Now each failure condition produces a distinct error.</p>
<pre class="prettyprint"><code class="language-sh">$ curl http://127.0.0.1:8080/ -d in=1334534a
&#39;1334534a&#39; is not a valid int for in
$ curl http://127.0.0.1:8080/
in is missing
</code></pre>
<div class="nav-next">
<p><strong>Next:</strong> <a href="../07/e.html">Independent Failure</a></p>
</div>
</div>
<div class="large-3 show-for-large column" data-sticky-container>
<nav class="sidebar sticky" data-sticky data-anchor="docs" data-sticky-on="large">
<div class="page-nav">
<div class="nav-title">On this page:</div>
<div class="nav-toc">
<ul>
  <li><a href="../07/d.html#required-parameters" class="header">Required Parameters</a>
  <ul>
    <li><a href="../07/d.html#your-function" class="header">Your &ldquo;required&rdquo; Function</a></li>
    <li><a href="../07/d.html#using-implicitly" class="header">Using &ldquo;required&rdquo; Implicitly</a></li>
    <li><a href="../07/d.html#using-explicitly" class="header">Using &ldquo;required&rdquo; Explicitly</a></li>
  </ul></li>
</ul>
</div>
</div>
</nav>
</div>
</div>

</section>
</div>

</div>

<footer class="site-footer">

<section class="site-footer-nav">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 medium-4 large-3 text-center column">
<div class="nav-links">
<ul>
<!-- <li><a href="https://www.example.com/products/">Products</a> -->
</ul>
</div>
</div>

</div>
</div>
</div>
</section>

<section class="site-footer-base">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 text-center large-9 column">

<!--
<div class="copyright">
<span class="text">&copy; 2017</span>
<a href="https://www.example.com" class="logo">logo</a>
</div>
-->
</div>

</div>
</div>
</div>
</section>
</footer>

</div>
</div>
</div>
</body>

<script type="text/javascript" src="../lib/foundation/dist/foundation.min.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="../js/magellan.js"></script>

<style type="text/css">@import "../lib/prettify/prettify.css";</style>
<script type="text/javascript" src="../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">jQuery(function(){window.prettyPrint && prettyPrint()});</script>

</html>
